<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Primary Meta Tags -->
    <title>Login - Global Chat Room | Nmedea.com</title>
    <meta name="title" content="Login - Global Chat Room | Nmedea.com">
    <meta name="description" content="Join our global chat community at Nmedea.com. Connect with people worldwide in real-time. Safe, secure, and easy to use chat platform for international communication.">
    
    <!-- Keywords -->
    <meta name="keywords" content="global chat, chat room, online chat, international chat, nmedea chat, secure chat, real-time chat, chat community, social platform">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://nmedea.com/login">
    <meta property="og:title" content="Login to Global Chat Room - Nmedea.com">
    <meta property="og:description" content="Connect with people worldwide in our global chat community. Join now for real-time conversations and make friends across borders.">
    <meta property="og:image" content="https://nmedea.com/images/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://nmedea.com/login">
    <meta property="twitter:title" content="Login to Global Chat Room - Nmedea.com">
    <meta property="twitter:description" content="Connect with people worldwide in our global chat community. Join now for real-time conversations and make friends across borders.">
    <meta property="twitter:image" content="https://nmedea.com/images/twitter-image.jpg">
    
    <!-- Additional SEO Tags -->
    <meta name="robots" content="index, follow">
    <meta name="author" content="Nmedea.com">
    <meta name="language" content="English">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="stylesheet" href="login.css">
    <link rel="icon" type="image/png" href="https://firebasestorage.googleapis.com/v0/b/chatnot-e5b4e.firebasestorage.app/o/Black%20and%20Blue%20Initials%20Creative%20Logo_20250214_091517_0000.png?alt=media&token=e420af56-8bd5-4691-b246-b0485c30dccd">
    
    
    <!-- Cache Control -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    body {
        min-height: 100vh;
        background-color: #f9f9f9;
        display: flex;
        overflow-x: hidden;
        color: #333;
    }

    .auth-container {
        display: flex;
        width: 100vw;
        height: 100vh;
        position: relative;
    }

    .auth-background {
        position: fixed;
        width: 50%;
        height: 100%;
        background: linear-gradient(135deg, #e0e7ff 0%, #d1e0ff 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #333;
        padding: 40px;
        display: none;
    }

    .auth-content {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
        background: #fff;
        position: relative;
        transition: transform 0.5s ease;
    }

    .logo {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 40px;
        color: #4a90e2;
    }

    .form-container {
        width: 100%;
        max-width: 400px;
        animation: fadeIn 0.5s ease;
    }

    .tabs {
        display: flex;
        margin-bottom: 30px;
        border-bottom: 2px solid #e0e7ff;
    }

    .tab {
        flex: 1;
        padding: 15px;
        text-align: center;
        cursor: pointer;
        color: #666;
        font-weight: 500;
        position: relative;
        transition: all 0.3s;
    }

    .tab.active {
        color: #4a90e2;
    }

    .tab.active::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100%;
        height: 2px;
        background-color: #4a90e2;
    }

    .auth-form {
        display: none;
        animation: fadeIn 0.5s ease;
    }

    .auth-form.active {
        display: block;
    }

    .input-group {
        margin-bottom: 20px;
        position: relative;
    }

    .error-message {
        color: #dc3545;
        font-size: 14px;
        margin-top: 5px;
        display: none;
    }

    label {
        display: block;
        margin-bottom: 8px;
        color: #333;
        font-weight: 500;
    }

    input {
        width: 100%;
        padding: 15px;
        border: 2px solid #e0e7ff;
        border-radius: 8px;
        font-size: 16px;
        transition: all 0.3s;
        background: #f9f9f9;
        color: #333;
    }

    input:focus {
        border-color: #4a90e2;
        background: #fff;
        outline: none;
    }

    input.error {
        border-color: #dc3545;
    }

    button {
        width: 100%;
        padding: 15px;
        border: none;
        border-radius: 8px;
        background-color: #4a90e2;
        color: white;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        margin-top: 10px;
        position: relative;
        overflow: hidden;
    }

    button:hover {
        background-color: #357abd;
        transform: translateY(-2px);
    }

    button:disabled {
        opacity: 0.7;
        cursor: not-allowed;
        transform: none;
    }

    .button-spinner {
        display: none;
        width: 20px;
        height: 20px;
        border: 2px solid #ffffff;
        border-radius: 50%;
        border-top-color: transparent;
        animation: spin 1s linear infinite;
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
    }

    .profile-setup {
        display: none;
        animation: fadeIn 0.5s ease;
    }

    .image-preview {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        margin: 20px auto;
        background-size: cover;
        background-position: center;
        border: 3px solid #4a90e2;
        display: none;
    }

    @keyframes spin {
        to { transform: translateY(-50%) rotate(360deg); }
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @media (min-width: 768px) {
        .auth-background {
            display: flex;
        }
        
        .auth-content {
            width: 50%;
            margin-left: 50%;
        }
    }
</style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-background">
            <div class="brand-content">
                <h1>Welcome to nmedea</h1>
                <p>Connect with people around the world seamlessly</p>
            </div>
        </div>

        <div class="auth-content">
            <div class="logo">Nmedea</div>
            
            <div class="form-container">
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('signin')">Sign In</div>
                    <div class="tab" onclick="switchTab('signup')">Sign Up</div>
                </div>

                <!-- Sign In Form -->
                <form class="auth-form active" id="signin-form">
                    <div class="input-group">
                        <label for="signin-email">Email</label>
                        <input type="email" id="signin-email" required>
                        <div class="error-message" id="signin-email-error"></div>
                    </div>
                    <div class="input-group">
                        <label for="signin-password">Password</label>
                        <input type="password" id="signin-password" required>
                        <div class="error-message" id="signin-password-error"></div>
                    </div>
                    <div class="error-message" id="signin-error"></div>
                    <button type="submit">
                        Sign In
                        <div class="button-spinner"></div>
                    </button>
                </form>

                <!-- Sign Up Form -->
                <form class="auth-form" id="signup-form">
                    <div class="input-group">
                        <label for="signup-username">Username</label>
                        <input type="text" id="signup-username" required>
                        <div class="error-message" id="signup-username-error"></div>
                    </div>
                    <div class="input-group">
                        <label for="signup-email">Email</label>
                        <input type="email" id="signup-email" required>
                        <div class="error-message" id="signup-email-error"></div>
                    </div>
                    <div class="input-group">
                        <label for="signup-password">Password</label>
                        <input type="password" id="signup-password" required>
                        <div class="error-message" id="signup-password-error"></div>
                    </div>
                    <div class="error-message" id="signup-error"></div>
                    <button type="submit">
                        Continue
                        <div class="button-spinner"></div>
                    </button>
                </form>

                <!-- Profile Setup Form -->
                <form class="auth-form" id="profile-setup-form">
                    <div class="input-group">
                        <label for="profile-picture">Profile Picture</label>
                        <input type="file" id="profile-picture" accept="image/*" required>
                        <div class="error-message" id="profile-picture-error"></div>
                    </div>
                    <div id="image-preview" class="image-preview"></div>
                    <div class="input-group">
                        <label for="youtube-channel">YouTube Channel (Optional)</label>
                        <input type="text" id="youtube-channel">
                        <div class="error-message" id="youtube-channel-error"></div>
                    </div>
                    <div class="error-message" id="profile-error"></div>
                    <button type="submit">
                        Complete Setup
                        <div class="button-spinner"></div>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";
  import { getFirestore, setDoc, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDnPz8BWCaXJOazlFVO4Eap8VxdSR2oDFQ",
    authDomain: "globalchat-2d669.firebaseapp.com",
    projectId: "globalchat-2d669",
    storageBucket: "globalchat-2d669.firebasestorage.app",
    messagingSenderId: "178714711978",
    appId: "1:178714711978:web:fb831188be23e62a4bbdd3",
    measurementId: "G-LYZP41ZJ46"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const storage = getStorage(app);
  const db = getFirestore(app);

  let tempUserData = null;

  // Check authentication state
  auth.onAuthStateChanged(async (user) => {
    if (user) {
      try {
        const userDoc = await getDoc(doc(db, 'users', user.uid));
        if (userDoc.exists()) {
          const userData = userDoc.data();
          if (userData.photoURL) {
            // User has completed profile setup, redirect to menu
            window.location.href = 'half.html';
            return;
          }
        }
        // Only show profile setup if user doesn't have a profile picture
        showProfileSetup();
      } catch (error) {
        console.error("Error checking user data:", error);
      }
    }
  });

  // Form switching functionality
  window.switchTab = function(tab) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));

    if (tab === 'signin') {
      document.querySelector('.tab:first-child').classList.add('active');
      document.getElementById('signin-form').classList.add('active');
    } else {
      document.querySelector('.tab:last-child').classList.add('active');
      document.getElementById('signup-form').classList.add('active');
    }
  };

  function showProfileSetup() {
    document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
    document.getElementById('profile-setup-form').classList.add('active');
    document.querySelector('.tabs').style.display = 'none';
  }

  // Input validation
  function validateInput(input) {
    const value = input.value.trim();

    if (!value && input.required) {
      return 'This field is required';
    }

    switch (input.type) {
      case 'email':
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(value)) {
          return 'Please enter a valid email address';
        }
        break;
      case 'password':
        if (value.length < 6) {
          return 'Password must be at least 6 characters long';
        }
        break;
      case 'text':
        if (input.id === 'signup-username') {
          const usernameRegex = /^[a-zA-Z0-9_]{3,20}$/;
          if (!usernameRegex.test(value)) {
            return 'Username must be 3-20 characters and can only contain letters, numbers, and underscores';
          }
        }
        break;
      case 'file':
        if (input.id === 'profile-picture' && !input.files[0]) {
          return 'Please select a profile picture';
        }
        break;
    }
    return null;
  }

  // Error display
  function showError(elementId, message) {
    const errorElement = document.getElementById(elementId);
    if (errorElement) {
      errorElement.textContent = message;
      errorElement.style.display = 'block';
    }
  }

  // Clear errors
  function clearErrors() {
    document.querySelectorAll('.error-message').forEach(error => {
      error.textContent = '';
      error.style.display = 'none';
    });
  }

  // Profile picture preview
  const profilePictureInput = document.getElementById('profile-picture');
  const imagePreview = document.getElementById('image-preview');

  profilePictureInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = (event) => {
        imagePreview.style.backgroundImage = `url(${event.target.result})`;
        imagePreview.style.display = 'block';
      };
      reader.readAsDataURL(file);
    }
  });

  // Sign In Form Submission
  document.getElementById('signin-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    clearErrors();

    const email = document.getElementById('signin-email').value;
    const password = document.getElementById('signin-password').value;
    const button = e.target.querySelector('button');
    const spinner = button.querySelector('.button-spinner');

    // Validate inputs
    const emailInput = document.getElementById('signin-email');
    const passwordInput = document.getElementById('signin-password');
    const emailError = validateInput(emailInput);
    const passwordError = validateInput(passwordInput);

    if (emailError) {
      showError('signin-email-error', emailError);
      return;
    }
    if (passwordError) {
      showError('signin-password-error', passwordError);
      return;
    }

    button.disabled = true;
    spinner.style.display = 'block';

    try {
      const userCredential = await signInWithEmailAndPassword(auth, email, password);
      const userDoc = await getDoc(doc(db, 'users', userCredential.user.uid));

      if (userDoc.exists()) {
        const userData = userDoc.data();
        if (userData.photoURL) {
          // User has completed profile setup
          window.location.href = 'manu.html';
          return;
        }
      }
      // Show profile setup if needed
      showProfileSetup();
    } catch (error) {
      showError('signin-error', 'Invalid email or password');
      button.disabled = false;
      spinner.style.display = 'none';
    }
  });

  // Sign Up Form Submission
  document.getElementById('signup-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    clearErrors();

    const email = document.getElementById('signup-email').value;
    const password = document.getElementById('signup-password').value;
    const username = document.getElementById('signup-username').value;
    const button = e.target.querySelector('button');
    const spinner = button.querySelector('.button-spinner');

    // Validate all inputs
    const inputs = e.target.querySelectorAll('input');
    let isValid = true;

    inputs.forEach(input => {
      const error = validateInput(input);
      if (error) {
        showError(`${input.id}-error`, error);
        isValid = false;
      }
    });

    if (!isValid) return;

    button.disabled = true;
    spinner.style.display = 'block';

    try {
      const userCredential = await createUserWithEmailAndPassword(auth, email, password);
      tempUserData = {
        uid: userCredential.user.uid,
        email,
        username,
        createdAt: new Date().toISOString()
      };

      // Create initial user document
      await setDoc(doc(db, 'users', userCredential.user.uid), tempUserData);

      showProfileSetup();
    } catch (error) {
      if (error.code === 'auth/email-already-in-use') {
        showError('signup-error', 'This email is already registered');
      } else {
        showError('signup-error', 'An error occurred during registration');
      }
      button.disabled = false;
      spinner.style.display = 'none';
    }
  });

  // Profile Setup Form Submission
  document.getElementById('profile-setup-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    clearErrors();

    const profilePicture = document.getElementById('profile-picture').files[0];
    const youtubeChannel = document.getElementById('youtube-channel').value;
    const button = e.target.querySelector('button');
    const spinner = button.querySelector('.button-spinner');

    // Validate profile picture
    if (!profilePicture) {
      showError('profile-picture-error', 'Please select a profile picture');
      return;
    }

    button.disabled = true;
    spinner.style.display = 'block';

    try {
      const user = auth.currentUser;
      if (!user) throw new Error('No authenticated user found');

      // Upload profile picture
      const storageRef = ref(storage, `profilePictures/${user.uid}`);
      await uploadBytes(storageRef, profilePicture);
      const photoURL = await getDownloadURL(storageRef);

      // Update user document with profile picture and YouTube channel
      await setDoc(doc(db, 'users', user.uid), {
        ...(tempUserData || {}),
        photoURL,
        youtubeChannel: youtubeChannel || null,
      }, { merge: true });

      // Redirect to main application
      window.location.href = 'half.html';
    } catch (error) {
      console.error('Profile setup error:', error);
      showError('profile-error', 'An error occurred while setting up your profile');
      button.disabled = false;
      spinner.style.display = 'none';
    }
  });

  // Real-time input validation
  document.querySelectorAll('input').forEach(input => {
    input.addEventListener('input', () => {
      const error = validateInput(input);
      const errorElement = document.getElementById(`${input.id}-error`);
      if (errorElement) {
        errorElement.textContent = error || '';
        errorElement.style.display = error ? 'block' : 'none';
      }
    });
  });
</script>

<script>
  // Immediately hide everything to prevent flickering
  document.documentElement.style.visibility = 'hidden';
  
  // Create splash screen container immediately
  const splashScreen = document.createElement('div');
  splashScreen.style.cssText = `
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: #f9f9f9; /* Twitter dark background */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      opacity: 1;
      transition: opacity 0.5s ease-in-out;
  `;
  
  // Create content wrapper
  const contentWrapper = document.createElement('div');
  contentWrapper.style.cssText = `
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
  `;
  
  // Create logo container (easy to replace)
  const logoContainer = document.createElement('div');
  logoContainer.style.cssText = `
      width: 150px;
      height: 150px;
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
  `;
  
  // Placeholder logo (can be easily replaced)
  const logoPlaceholder = document.createElement('div');
  logoPlaceholder.id = 'splash-screen-logo';
  logoPlaceholder.style.cssText = `
      width: 120px;
      height: 120px;
      background: #1da1f2; /* Twitter blue */
      border-radius: 50%; /* Circular logo */
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  `;
  
  const logoText = document.createElement('span');
  logoText.textContent = 'N';
  logoText.style.cssText = `
      font-size: 48px;
      font-weight: bold;
      color: white;
  `;
  logoPlaceholder.appendChild(logoText);
  logoContainer.appendChild(logoPlaceholder);
  
  // Create company name
  const companyName = document.createElement('h1');
  companyName.textContent = 'nmedea'; // Your company name here
  companyName.style.cssText = `
      font-size: 28px;
      font-weight: 600;
      color: #1da1f2; /* White text */
      margin-bottom: 20px;
      letter-spacing: 1px;
  `;
  
  // Create Twitter-style loading spinner
  const loadingSpinner = document.createElement('div');
  loadingSpinner.style.cssText = `
      width: 40px;
      height: 40px;
      border: 4px solid #1da1f2; /* Twitter blue */
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
  `;
  
  // Append elements
  contentWrapper.appendChild(logoContainer);
  contentWrapper.appendChild(companyName);
  contentWrapper.appendChild(loadingSpinner);
  splashScreen.appendChild(contentWrapper);
  
  // Add to body immediately
  document.body.insertBefore(splashScreen, document.body.firstChild);
  
  // Add styles for the spinner animation
  const styles = document.createElement('style');
  styles.textContent = `
      @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
      }
  `;
  document.head.appendChild(styles);
  
  // Show the splash screen immediately
  document.documentElement.style.visibility = 'visible';
  
  // Completely prevent form from showing
  const authContainer = document.querySelector('.auth-container');
  authContainer.style.opacity = '0';
  authContainer.style.pointerEvents = 'none';
  authContainer.style.position = 'fixed';
  authContainer.style.top = '-100%';
  
  // Remove splash screen and show form
  const removeSplashScreen = () => {
    splashScreen.style.opacity = '0';
    
    setTimeout(() => {
      document.body.removeChild(splashScreen);
      
      // Restore the auth container
      authContainer.style.position = 'static';
      authContainer.style.top = '0';
      authContainer.style.opacity = '1';
      authContainer.style.pointerEvents = 'auto';
    }, 500);
  };
  
  // Remove after 6 seconds
  setTimeout(removeSplashScreen, 6000);
  
  // Expose a method to easily replace the logo
  window.replaceSplashScreenLogo = (logoUrl) => {
    const logoContainer = document.getElementById('splash-screen-logo');
    if (logoContainer) {
      // Clear existing content
      logoContainer.innerHTML = '';
      
      // Create and append new logo image
      const logoImage = document.createElement('img');
      logoImage.src = logoUrl;
      logoImage.style.cssText = `
              max-width: 100%;
              max-height: 100%;
              object-fit: contain;
          `;
      
      logoContainer.appendChild(logoImage);
    }
  };
</script>

<script>
  if (window !== window.top) {
    document.body.innerHTML = "<h2>this action is not allowed</h2>";
  }
</script>
<script>
  function createDownloadNotification() {
    // Check if running as PWA or standalone app
    if (window.matchMedia('(display-mode: standalone)').matches ||
      window.navigator.standalone ||
      document.referrer.includes('android-app://')) {
      return; // Don't show notification if it's installed as PWA
    }
    
    // More thorough browser detection
    const isBrowser = () => {
      const ua = navigator.userAgent.toLowerCase();
      
      // Check if it's a WebView
      const isWebView = /(webview|wv)/.test(ua) ||
        /windows.*phone/.test(ua) ||
        /android.*mobile/.test(ua) && /wv/.test(ua);
      
      // Check if it's a known mobile browser
      const isMobileBrowser = /chrome|safari|firefox|opera|edge|ie/i.test(ua) &&
        !isWebView &&
        !ua.includes('samsung') &&
        !ua.includes('miui') &&
        !ua.includes('huawei');
      
      // Check if it's a desktop browser
      const isDesktopBrowser = /chrome|firefox|opera|edge|ie/i.test(ua) &&
        !/(android|iphone|ipad|ipod|windows phone)/i.test(ua);
      
      // Return true only for mobile browsers, exclude desktop browsers
      return isMobileBrowser && !isDesktopBrowser;
    };
    
    // Only proceed if it's a regular mobile browser
    if (!isBrowser()) {
      return;
    }
    
    // Detect OS for customizing the message
    const userAgent = navigator.userAgent.toLowerCase();
    const isAndroid = /android/.test(userAgent);
    const isIOS = /iphone|ipad|ipod/.test(userAgent);
    const isWindows = /windows/.test(userAgent);
    
    // Create notification container
    const notification = document.createElement("div");
    notification.style.cssText = `
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%) translateY(100px);
        background: #000000;
        color: #ffffff;
        padding: 20px;
        border-radius: 12px;
        font-family: 'Segoe UI', Arial, sans-serif;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        display: flex;
        align-items: center;
        gap: 15px;
        opacity: 0;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 10000;
        max-width: 90%;
        width: auto;
    `;
    
    // Add icon based on OS
    const iconContainer = document.createElement("div");
    iconContainer.innerHTML = `
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
            ${isAndroid ? 
                '<path d="M5 12h14M12 5l7 7-7 7"/>' :
                isIOS ? 
                    '<path d="M12 2a10 10 0 100 20 10 10 0 000-20zm0 18a8 8 0 110-16 8 8 0 010 16z"/>' :
                    '<path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4m4-5l5 5 5-5m-5 5V3"/>'}
        </svg>
    `;
    
    // Create content
    const content = document.createElement("div");
    content.innerHTML = `
        <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px">
            Download Available
        </div>
        <div style="font-size: 14px; opacity: 0.9">
            ${isAndroid ? 'Get it on Android' : isIOS ? 'Download for iOS' : 'Download for Windows'}
        </div>
    `;
    
    // Create buttons container
    const buttons = document.createElement("div");
    buttons.style.cssText = `
        display: flex;
        gap: 10px;
        margin-left: 20px;
    `;
    
    // Create action buttons
    const installButton = document.createElement("button");
    installButton.textContent = "Install";
    installButton.style.cssText = `
        background: #ffffff;
        color: #000000;
        border: none;
        padding: 8px 16px;
        border-radius: 6px;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.3s;
    `;
    
    const cancelButton = document.createElement("button");
    cancelButton.textContent = "Not Now";
    cancelButton.style.cssText = `
        background: transparent;
        color: #ffffff;
        border: 1px solid #ffffff;
        padding: 8px 16px;
        border-radius: 6px;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.3s;
    `;
    
    // Add hover effects
    installButton.onmouseover = () => installButton.style.background = '#e0e0e0';
    installButton.onmouseout = () => installButton.style.background = '#ffffff';
    cancelButton.onmouseover = () => cancelButton.style.background = 'rgba(255, 255, 255, 0.1)';
    cancelButton.onmouseout = () => cancelButton.style.background = 'transparent';
    
    // Handle button clicks
    installButton.onclick = () => {
      if (isAndroid) {
        const link = document.createElement('a');
        link.href = 'https://median.co/share/zjajxa#apk';
        link.download = 'app.apk';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      } else {
        window.open('https://median.co/share/zjajxa#apk', '_blank');
      }
      hideNotification();
    };
    
    cancelButton.onclick = hideNotification;
    
    // Assemble notification
    buttons.appendChild(installButton);
    buttons.appendChild(cancelButton);
    notification.appendChild(iconContainer);
    notification.appendChild(content);
    notification.appendChild(buttons);
    document.body.appendChild(notification);
    
    // Show animation
    setTimeout(() => {
      notification.style.opacity = '1';
      notification.style.transform = 'translateX(-50%) translateY(0)';
    }, 100);
    
    function hideNotification() {
      notification.style.opacity = '0';
      notification.style.transform = 'translateX(-50%) translateY(100px)';
      setTimeout(() => notification.remove(), 500);
    }
  }
  
  // Show notification when page loads
  window.addEventListener('load', createDownloadNotification);
</script>