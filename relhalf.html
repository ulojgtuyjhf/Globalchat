
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Social Media Interface</title>
     

<style>

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}
/* Prevent scrolling */
html, body {
    overflow: hidden;
    height: 100%;
    width: 100%;
}

body {
    background-color: #fff;
    color: #0f1419;
    height: 100vh;
    overflow: hidden;
}

.container {
    display: flex;
    height: 100vh;
    width: 100%;
}

/* Left sidebar styles */
.sidebar {
    width: 325px;
    padding: 0 12px;
    display: flex;
    flex-direction: column;
    border-right: 1px solid #eff3f4;
    height: 100%;
}

/* Logo styles */
.logo-container {
    margin: 12px 0;
    padding: 10px 12px;
}

.logo {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: linear-gradient(135deg, #5A9BD5 0%, #3F729B 50%, #B0C4DE 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 28px;
    cursor: pointer;
    transition: background-color 0.2s ease, filter 0.2s ease;
    box-shadow: 0 2px 8px rgba(63, 114, 155, 0.3);
    outline: none;
}

.logo:hover,
.logo:focus {
    background: linear-gradient(135deg, #6AABF5 0%, #4F82AB 50%, #C0D4EE 100%);
    filter: brightness(1.05);
}

/* Remove blue focus outline from all clickable elements */
.menu-item:focus,
.post-btn:focus {
    outline: none;
}

.menu {
    display: flex;
    flex-direction: column;
    margin-top: 10px;
}

.menu-item {
    display: flex;
    align-items: center;
    padding: 12px;
    border-radius: 50px;
    margin-bottom: 12px;
    color: #0f1419;
    text-decoration: none;
    font-size: 18px;
    font-weight: 400;
    cursor: pointer;
    transition: filter 0.2s ease;
    outline: none;
}

.menu-item:hover,
.menu-item:focus {
    /* Only a subtle brightness effect on hover/focus */
    filter: brightness(1.05);
}

.menu-item.active {
    font-weight: 700;
    color: #3F729B;
}

.menu-item svg {
    margin-right: 20px;
    width: 24px;
    height: 24px;
}

.menu-item.active svg {
    color: #3F729B;
    fill: #3F729B;
}

.post-btn {
    background: linear-gradient(135deg, #5A9BD5 0%, #3F729B 100%);
    color: white;
    border: none;
    border-radius: 50px;
    padding: 15px 0;
    font-size: 16px;
    font-weight: 700;
    margin: 15px 0;
    cursor: pointer;
    transition: background 0.2s ease, filter 0.2s ease, box-shadow 0.2s ease;
    box-shadow: 0 2px 8px rgba(63, 114, 155, 0.3);
    outline: none;
}

.post-btn:hover,
.post-btn:focus {
    background: linear-gradient(135deg, #6AABF5 0%, #4F82AB 100%);
    filter: brightness(1.05);
    box-shadow: 0 4px 12px rgba(63, 114, 155, 0.4);
}

/* Content sections */
.content-section {
    position: relative;
    height: 100%;
}

.content {
    flex-grow: 1;
    min-width: 0;
    height: 100%;
    border-right: 1px solid #eff3f4;
}

.widgets {
    width: 350px;
    height: 100%;
}

.section-container {
    width: 100%;
    height: 100%;
    display: none;
}

.section-container.active {
    display: block;
}

.loader {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 2;
    display: none;
}

.loader svg {
    animation: spin 1s linear infinite;
}

.loader svg path, .loader svg circle {
    fill: #3F729B !important;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Tweet compose modal */
.tweet-compose-modal {
    backdrop-filter: blur(5px);
}

.tweet-compose-content {
    border: 1px solid rgba(90, 155, 213, 0.2);
    box-shadow: 0 8px 30px rgba(63, 114, 155, 0.2);
}

.tweet-compose-close:hover {
    background-color: rgba(90, 155, 213, 0.1);
    color: #3F729B;
}

/* Theme variations */
body.dark {
    background-color: #000000;
    color: #ffffff;
}

body.dark .sidebar,
body.dark .content {
    border-right-color: #2f3336;
}

body.dark .menu-item {
    color: #ffffff;
}

body.dark .menu-item:hover,
body.dark .menu-item:focus {
    filter: brightness(1.05);
}

body.dim {
    background-color: #15202b;
    color: #f7f9f9;
}

body.dim .sidebar,
body.dim .content {
    border-right-color: #38444d;
}

body.dim .menu-item {
    color: #f7f9f9;
}

body.dim .menu-item:hover,
body.dim .menu-item:focus {
    filter: brightness(1.05);
}

/* Responsive styles */
@media (max-width: 1024px) {
    .widgets {
        width: 290px;
    }
}

@media (max-width: 768px) {
    .sidebar {
        width: 88px;
        padding: 0 8px;
    }
    .sidebar .menu-item span {
        display: none;
    }
    .sidebar .post-btn {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        padding: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 15px auto;
    }
    .sidebar .post-btn::after {
        content: "+";
        font-size: 24px;
    }
    .sidebar .post-btn span {
        display: none;
    }
}

@media (max-width: 500px) {
    .widgets {
        display: none;
    }
}

</style>
</head>
<body>
    <div class="container">
        <!-- Left sidebar (menu) -->
        <div class="sidebar">
            <!-- Logo -->
            <div class="logo-container">
                <div class="logo" id="home-logo">
                    N
                </div>
            </div>
            
            <nav class="menu">
                <a href="#" class="menu-item active" data-section="home-section">
                  <?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 441.975" fill="currentColor">
  <path d="M298.107 225.728c26.583-26.583 62.142-38.719 96.92-36.417V37.438c0-1.752-.76-3.386-1.968-4.593-1.222-1.222-2.871-1.988-4.613-1.988H37.438c-1.702 0-3.342.78-4.573 2.012-1.232 1.232-2.007 2.866-2.007 4.569v277a6.53 6.53 0 001.918 4.618l.059.059a6.505 6.505 0 004.603 1.904h61.146c8.519 0 15.429 6.91 15.429 15.429v53.981l67.844-65.072a15.336 15.336 0 0110.668-4.294l69.071-.014c-1.83-34.268 10.335-69.145 36.511-95.321zm127.777-30.435c18.069 5.933 35.054 16.071 49.418 30.435 48.931 48.931 48.931 128.269 0 177.2-48.932 48.931-128.264 48.931-177.195 0-14.796-14.796-25.116-32.374-30.96-51.051h-68.478l-88.646 85.02a15.384 15.384 0 01-11.439 5.078c-8.519 0-15.429-6.909-15.429-15.428v-74.67H37.438c-10.222 0-19.541-4.221-26.328-10.968l-.064-.064C4.221 333.999 0 324.616 0 314.438v-277c0-10.227 4.265-19.605 11.046-26.387C17.833 4.264 27.211 0 37.438 0h351.008c10.227 0 19.634 4.23 26.431 11.027 6.758 6.757 11.007 16.106 11.007 26.411v157.855zM105.93 138.78c-8.519 0-15.429-6.91-15.429-15.429s6.91-15.429 15.429-15.429h214.044c8.519 0 15.429 6.91 15.429 15.429s-6.91 15.429-15.429 15.429H105.93zm0 91.36c-8.519 0-15.429-6.909-15.429-15.429 0-8.519 6.91-15.428 15.429-15.428h143.29c8.519 0 15.429 6.909 15.429 15.428 0 8.52-6.91 15.429-15.429 15.429H105.93zm305.797 74.562c-6.081.476-11.4-4.068-11.876-10.148-.476-6.08 4.068-11.4 10.148-11.876l12.632-1.016a92.791 92.791 0 00-2.861-2.346c-4.564-3.606-9.314-6.747-13.201-8.671-12.072-5.967-25.439-6.477-37.276-2.483-11.792 3.985-22.078 12.48-28.041 24.532-5.977 12.072-6.497 25.44-2.507 37.266a48.621 48.621 0 0024.556 28.071 48.602 48.602 0 0035.201 3.15c11.409-3.313 21.587-10.747 28.094-21.465 3.146-5.197 9.913-6.86 15.11-3.715 5.197 3.146 6.86 9.913 3.715 15.11-9.481 15.62-24.252 26.431-40.785 31.23-16.42 4.761-34.597 3.632-51.091-4.534-17.519-8.681-29.89-23.663-35.696-40.849-5.79-17.151-5.04-36.525 3.627-54.02 8.666-17.519 23.633-29.866 40.819-35.671 17.146-5.791 36.53-5.05 54.03 3.602 5.138 2.547 11.287 6.585 17.088 11.174l2.325 1.879-.485-8.799c-.329-6.08 4.328-11.287 10.408-11.616 6.08-.328 11.287 4.329 11.616 10.409l1.987 35.902c.476 6.08-4.068 11.4-10.148 11.876l-37.389 3.008z" />
</svg>
                    <span>connect</span>
                </a>
                <a href="#" class="menu-item" data-section="explore-section"><?xml version="1.0" encoding="utf-8"?>
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 103.44" style="enable-background:new 0 0 122.88 103.44" xml:space="preserve" fill="currentColor">
  <g>
    <path d="M69.49,102.77L49.8,84.04l-20.23,18.27c-0.45,0.49-1.09,0.79-1.8,0.79c-1.35,0-2.44-1.09-2.44-2.44V60.77L0.76,37.41 c-0.98-0.93-1.01-2.47-0.09-3.45c0.31-0.33,0.7-0.55,1.11-0.67l0,0l118-33.2c1.3-0.36,2.64,0.39,3.01,1.69 c0.19,0.66,0.08,1.34-0.24,1.89l-49.2,98.42c-0.6,1.2-2.06,1.69-3.26,1.09C69.86,103.07,69.66,102.93,69.49,102.77L69.49,102.77 L69.49,102.77z M46.26,80.68L30.21,65.42v29.76L46.26,80.68L46.26,80.68z M28.15,56.73l76.32-47.26L7.22,36.83L28.15,56.73 L28.15,56.73z M114.43,9.03L31.79,60.19l38.67,36.78L114.43,9.03L114.43,9.03z" />
  </g>
</svg>

                    <span>remainders</span>
                </a>
                <a href="#" class="menu-item" data-section="notifications-section">
                    <?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 329.799" fill="currentColor">
  <path fill-rule="nonzero" d="M63.64 0h256.865c34.817 0 63.641 28.993 63.641 63.772v2.937l109.278-48.398c6.684-2.941 14.494.095 17.436 6.778a13.198 13.198 0 011.123 5.329l.017 268.98c0 7.315-5.932 13.247-13.247 13.247-2.305 0-4.47-.591-6.357-1.623l-108.25-50.035v5.04c0 34.59-29.018 63.772-63.641 63.772H63.64c-34.821 0-63.64-28.98-63.64-63.772V63.772C0 28.794 28.629 0 63.64 0zm321.431 95.235v137.057l100.435 46.42V50.753L385.071 95.235zm-64.566-68.741H63.64c-20.562 0-37.41 16.679-37.41 37.278v202.255c0 20.417 17.03 37.279 37.41 37.279h256.865c20.187 0 37.411-17.064 37.411-37.279V63.772c0-20.409-17.034-37.278-37.411-37.278z" />
</svg>
                    <span>facetime call</span>
                </a>
                <a href="#" class="menu-item" data-section="messages-section">
                    <svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 448.012"><path fill="#424C57" fill-rule="nonzero" d="M386.912 404.082c-31.653 27.804-68.134 42.5-104.037 43.83-37.327 1.383-73.956-11.673-103.851-39.445l-15.148-14.072-54.139-44.075h-48.07c-25.406 0-43.633-20.936-46.214-46.212L.195 154.71c-2.581-25.279 20.879-48.258 46.214-46.215l189.276 15.258c25.335 2.042 46.214 20.793 46.214 46.215v134.14c0 25.418-20.805 46.212-46.214 46.212h-59.323l4.221 47.53 4.398 2.497c33.226 18.862 65.806 26.928 96.721 22.849 28.258-3.73 55.317-17.66 80.412-42.828l-15.449-13.603 64.278-14.309-7.532 67.307-16.499-15.681z"/><path fill="#337EC6" d="M276.315 73.91l113.118-9.119-30.176-17.127c-33.228-18.859-65.809-26.927-96.721-22.848-28.26 3.73-55.319 17.66-80.414 42.827l15.449 13.604-64.277 14.309 7.533-67.307 16.498 15.682C188.979 16.128 225.46 1.43 261.363.099c37.327-1.382 73.956 11.673 103.851 39.446l26.942 25.027 73.434-5.92c25.335-2.042 48.796 20.936 46.215 46.216l-15.258 149.397c-2.581 25.277-20.808 46.212-46.215 46.212h-50.099l-71.815 58.466 5.19-58.466h-57.293c-25.411 0-46.216-20.793-46.216-46.212V120.126c0-25.422 20.881-44.173 46.216-46.216z"/><path fill="#fff" d="M84.246 173.714h43.841v-12.353h19.585v12.353h44.001v20.281h-9.033c-1.629 12.811-5.21 23.368-11.297 34.746-5.149 9.611-11.796 18.87-19.516 27.744 12.32 14.735 27.616 27.554 45.826 39.24l-10.073 15.701c-19.119-12.267-35.356-25.774-48.699-41.332-11.936 11.547-25.496 22.303-39.7 32.127l-10.588-15.325c14.055-9.725 27.407-20.347 38.896-31.672-10.588-15.493-18.697-32.88-24.308-52.875l17.968-5.038c4.601 16.401 11.052 30.837 19.344 43.759 5.657-6.848 10.548-13.876 14.412-21.092 4.74-8.866 7.286-16.196 8.89-25.983H84.246v-20.281zM398.456 215.314h-55.931l-7.357 25.09h-27.814c11.988-31.729 25.831-69.829 37.825-101.573 4.318-11.466 9.234-30.467 24.943-30.467 16.284 0 21.691 17.409 26.222 29.436l38.4 103.122h-28.708l-7.58-25.608zm-6-24.398l-21.893-57.703-21.971 57.703h43.864z"/></svg>
                    <span>Messages</span>
                </a>
                <a href="#" class="menu-item" data-section="bookmarks-section">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M4 4.5C4 3.12 5.119 2 6.5 2h11C18.881 2 20 3.12 20 4.5v18.44l-8-5.71-8 5.71V4.5zM6.5 4c-.276 0-.5.22-.5.5v14.56l6-4.29 6 4.29V4.5c0-.28-.224-.5-.5-.5h-11z"></path>
                    </svg>
                    <span>Bookmarks</span>
                </a>
                <a href="#" class="menu-item" data-section="profile-section">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M5.651 19h12.698c-.337-1.8-1.023-3.21-1.945-4.19C15.318 13.65 13.838 13 12 13s-3.317.65-4.404 1.81c-.922.98-1.608 2.39-1.945 4.19zm.486-5.56C7.627 11.85 9.648 11 12 11s4.373.85 5.863 2.44c1.477 1.58 2.366 3.8 2.632 6.46l.11 1.1H3.395l.11-1.1c.266-2.66 1.155-4.88 2.632-6.46zM12 4c-1.105 0-2 .9-2 2s.895 2 2 2 2-.9 2-2-.895-2-2-2zM8 6c0-2.21 1.791-4 4-4s4 1.79 4 4-1.791 4-4 4-4-1.79-4-4z"></path>
                    </svg>
                    <span>Profile</span>
                </a>
            </nav>
            <button class="post-btn">
                <span>Post</span>
            </button>
        </div>

        <!-- Middle section (dynamic content) -->
        <div class="content content-section">
            <!-- All sections are preloaded but hidden -->
            <div id="home-section" class="section-container active">
                <iframe src="globalchat.html" frameborder="0" width="100%" height="100%"></iframe>
            </div>
            <div id="explore-section" class="section-container">
                <iframe src="feeds.html" frameborder="0" width="100%" height="100%"></iframe>
            </div>
            <div id="notifications-section" class="section-container">
                <iframe src="localst.html" frameborder="0" width="100%" height="100%"></iframe>
            </div>
            <div id="messages-section" class="section-container">
                <iframe src="messages.html" frameborder="0" width="100%" height="100%"></iframe>
            </div>
            <div id="bookmarks-section" class="section-container">
                <iframe src="bookmarks.html" frameborder="0" width="100%" height="100%"></iframe>
            </div>
            <div id="profile-section" class="section-container">
                <iframe src="profileview.html" frameborder="0" width="100%" height="100%"></iframe>
            </div>
            
            <!-- Loader -->
            <div class="loader" id="content-loader">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="#1d9bf0">
                    <circle cx="12" cy="12" r="10" opacity="0.1" fill="#1d9bf0"/>
                    <path d="M12 22c5.523 0 10-4.477 10-10h-3c0 3.866-3.134 7-7 7s-7-3.134-7-7 3.134-7 7-7V2C6.477 2 2 6.477 2 12s4.477 10 10 10z"></path>
                </svg>
            </div>
        </div>

        <!-- Right widgets section -->
        <div class="widgets content-section">
            <iframe id="widgets-frame" src="fed.html" frameborder="0" width="100%" height="100%"></iframe>
            <div class="loader" id="widgets-loader">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="#1d9bf0">
                    <circle cx="12" cy="12" r="10" opacity="0.1" fill="#1d9bf0"/>
                    <path d="M12 22c5.523 0 10-4.477 10-10h-3c0 3.866-3.134 7-7 7s-7-3.134-7-7 3.134-7 7-7V2C6.477 2 2 6.477 2 12s4.477 10 10 10z"></path>
                </svg>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const menuItems = document.querySelectorAll('.menu-item');
            const sections = document.querySelectorAll('.section-container');
            const contentLoader = document.getElementById('content-loader');
            const logo = document.getElementById('home-logo');
            
            // Add logo click handler to return to home
            logo.addEventListener('click', function() {
                switchToSection('home-section');
            });
            
            // Track loaded sections to avoid reloading
            const loadedSections = {
                'home-section': false,
                'explore-section': false,
                'notifications-section': false,
                'messages-section': false,
                'bookmarks-section': false,
                'profile-section': false
            };
            
            // Set home section as loaded
            loadedSections['home-section'] = true;
            
            // Load a section only the first time it's accessed
            function loadSection(sectionId) {
                if (!loadedSections[sectionId]) {
                    try {
                        // Mark section as loaded - this happens before the actual load
                        // to prevent multiple load attempts on errors
                        loadedSections[sectionId] = true;
                        
                        // Show loader while section initializes
                        contentLoader.style.display = 'block';
                        
                        // On first load, initialize the section
                        const section = document.getElementById(sectionId);
                        const iframe = section.querySelector('iframe');
                        
                        iframe.onload = function() {
                            // Hide loader when iframe is loaded
                            contentLoader.style.display = 'none';
                        };
                        
                        iframe.onerror = function() {
                            // Handle load error
                            console.error(`Failed to load content for ${sectionId}`);
                            contentLoader.style.display = 'none';
                            alert("Error loading content. Please try again later.");
                            
                            // Fall back to home section
                            switchToSection('home-section');
                        };
                        
                        // Add additional error handling with timeout
                        setTimeout(function() {
                            if (contentLoader.style.display === 'block') {
                                // Still loading after timeout - probably an error
                                contentLoader.style.display = 'none';
                            }
                        }, 5000);
                    } catch (error) {
                        console.error("Error initializing section:", error);
                        contentLoader.style.display = 'none';
                    }
                } else {
                    // Section already loaded, just show it
                    contentLoader.style.display = 'none';
                }
            }
            
            // Switch to a section
            function switchToSection(sectionId) {
                // Hide all sections
                sections.forEach(section => {
                    section.classList.remove('active');
                });
                
                // Show selected section
                const selectedSection = document.getElementById(sectionId);
                selectedSection.classList.add('active');
                
                // Load content if first visit
                loadSection(sectionId);
                
                // Update menu
                menuItems.forEach(item => {
                    if (item.getAttribute('data-section') === sectionId) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });
            }
            
            // Add click handlers to menu items
            menuItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const sectionId = this.getAttribute('data-section');
                    switchToSection(sectionId);
                });
            });
        });
    </script>


<script>
  (function() {
    // RelHalf Theme Integration - Works alongside GlobalChatThemeManager
    const RelHalfThemeIntegrator = {
      // Style element ID
      styleElementId: 'relhalf-theme-integrator-styles',
      
      // Initialize integration
      initialize: function() {
        this.createStyleElement();
        this.applyCurrentTheme();
        this.setupEventListeners();
        console.log('RelHalf Theme Integrator initialized');
      },
      
      // Create dedicated style element
      createStyleElement: function() {
        const existingStyle = document.getElementById(this.styleElementId);
        if (existingStyle) {
          existingStyle.remove();
        }
        
        const styleElement = document.createElement('style');
        styleElement.id = this.styleElementId;
        styleElement.setAttribute('data-origin', 'relhalf-theme-integrator');
        document.head.appendChild(styleElement);
      },
      
      // Apply current theme from localStorage
      applyCurrentTheme: function() {
        const themeName = localStorage.getItem('twitter-theme') || 'light';
        this.applyTheme(themeName);
      },
      
      // Apply specified theme
      applyTheme: function(themeName) {
        // Default to light theme if invalid theme name
        const validThemes = ['light', 'dim', 'dark'];
        const theme = validThemes.includes(themeName) ? themeName : 'light';
        
        // Get style element
        const styleElement = document.getElementById(this.styleElementId);
        if (!styleElement) {
          this.createStyleElement();
          return this.applyTheme(theme); // Retry after creating style element
        }
        
        // Updated default gradient with our new signature metallic blue gradient
        const defaultGradient = 'linear-gradient(135deg, #5A9BD5 0%, #3F729B 50%, #B0C4DE 100%)';
        
        // Theme-specific CSS
        const themeCSS = {
          light: `
          body { background-color: #ffffff; color: #0f1419; }
          .sidebar { border-right-color: rgba(90, 155, 213, 0.2); }
          .content { border-right-color: rgba(90, 155, 213, 0.2); }
          .menu-item { color: #0f1419; }
          .menu-item:hover { background-color: rgba(90, 155, 213, 0.1); }
          .logo { background: ${defaultGradient}; }
          .post-btn { background: ${defaultGradient}; }
        `,
          dim: `
          body { background-color: #15202b; color: #f7f9f9; }
          .sidebar { border-right-color: #38444d; }
          .content { border-right-color: #38444d; }
          .menu-item { color: #f7f9f9; }
          .menu-item:hover { background-color: rgba(255, 255, 255, 0.1); }
          .logo { background: ${defaultGradient}; }
          .post-btn { background: ${defaultGradient}; }
        `,
          dark: `
          body { background-color: #000000; color: #ffffff; }
          .sidebar { border-right-color: #2f3336; }
          .content { border-right-color: #2f3336; }
          .menu-item { color: #ffffff; }
          .menu-item:hover { background-color: rgba(255, 255, 255, 0.1); }
          .logo { background: ${defaultGradient}; }
          .post-btn { background: ${defaultGradient}; }
        `
        };
        
        // Apply custom color if available
        const savedColorValue = localStorage.getItem('color-value');
        const savedColorIndex = localStorage.getItem('color-palette');
        
        let customColorCSS = '';
        if (savedColorValue && savedColorIndex !== '0') {
          const colorObj = this.hexToRGB(savedColorValue);
          const rgbString = `${colorObj.r}, ${colorObj.g}, ${colorObj.b}`;
          
          // Create custom gradient using the saved color
          const customGradient = this.createGradientFromColor(savedColorValue);
          
          customColorCSS = `
          .post-btn { background: ${customGradient}; }
          .post-btn:hover { box-shadow: 0 4px 12px rgba(${rgbString}, 0.3); }
          .logo { background: ${customGradient}; }
          .menu-item.active { color: ${savedColorValue}; }
          .menu-item.active svg { fill: ${savedColorValue}; }
          .loader svg path, .loader svg circle { fill: ${savedColorValue}; }
        `;
        }
        
        // Set the CSS content
        styleElement.textContent = themeCSS[theme] + customColorCSS;
        
        // Update body class for theme
        document.body.classList.remove('light-theme', 'dim-theme', 'dark-theme');
        document.body.classList.add(theme + '-theme');
        
        console.log('RelHalf Theme Integrator: Applied theme', theme);
      },
      
      // Create gradient from a single color
      createGradientFromColor: function(hexColor) {
        // Convert hex to RGB
        const colorObj = this.hexToRGB(hexColor);
        
        // Create lighter and darker versions
        const lighterColor = this.adjustColor(colorObj, 40); // Lighter
        const darkerColor = this.adjustColor(colorObj, -20); // Darker
        
        // Create gradient
        return `linear-gradient(135deg, 
        ${this.rgbToHex(darkerColor)} 0%, 
        ${hexColor} 50%, 
        ${this.rgbToHex(lighterColor)} 100%)`;
      },
      
      // Adjust color brightness
      adjustColor: function(rgbColor, amount) {
        return {
          r: Math.max(0, Math.min(255, rgbColor.r + amount)),
          g: Math.max(0, Math.min(255, rgbColor.g + amount)),
          b: Math.max(0, Math.min(255, rgbColor.b + amount))
        };
      },
      
      // RGB to Hex
      rgbToHex: function(rgbColor) {
        return '#' +
          ((1 << 24) + (rgbColor.r << 16) + (rgbColor.g << 8) + rgbColor.b)
          .toString(16).slice(1);
      },
      
      // Set up event listeners
      setupEventListeners: function() {
        // Listen for localStorage changes (theme)
        window.addEventListener('storage', (e) => {
          if (e.key === 'twitter-theme') {
            this.applyTheme(e.newValue || 'light');
          }
          // Handle color changes
          if (e.key === 'color-value' || e.key === 'color-palette') {
            this.applyCurrentTheme(); // Reapply theme with new color
          }
        });
        
        // Listen for custom events from GlobalChatThemeManager
        window.addEventListener('themeChanged', (e) => {
          if (e.detail && e.detail.theme) {
            this.applyTheme(e.detail.theme);
          }
        });
        
        // Listen for custom color change events
        window.addEventListener('chatColorChanged', (e) => {
          this.applyCurrentTheme();
        });
        
        // Check for theme changes periodically
        this.setupPeriodicCheck();
      },
      
      // Set up periodic check for theme consistency
      setupPeriodicCheck: function() {
        let lastKnownTheme = localStorage.getItem('twitter-theme') || 'light';
        let lastKnownColor = localStorage.getItem('color-value') || '';
        
        setInterval(() => {
          const currentTheme = localStorage.getItem('twitter-theme');
          const currentColor = localStorage.getItem('color-value');
          
          if (currentTheme !== lastKnownTheme || currentColor !== lastKnownColor) {
            lastKnownTheme = currentTheme || 'light';
            lastKnownColor = currentColor || '';
            this.applyCurrentTheme();
          }
        }, 3000); // Check every 3 seconds
      },
      
      // Utility: Convert hex to RGB
      hexToRGB: function(hex) {
        hex = hex.replace('#', '');
        const r = parseInt(hex.substring(0, 2), 16);
        const g = parseInt(hex.substring(2, 4), 16);
        const b = parseInt(hex.substring(4, 6), 16);
        return { r, g, b };
      }
    };
    
    // Initialize the theme integrator with a slight delay to ensure DOM is ready
    setTimeout(function() {
      RelHalfThemeIntegrator.initialize();
    }, 200);
  })();
</script>


<script>
document.addEventListener('DOMContentLoaded', function() {
    const postBtn = document.querySelector('.post-btn');
    
    // Create floating options container (positioned above the button)
    const optionsContainer = document.createElement('div');
    optionsContainer.className = 'post-options-container';
    optionsContainer.style.cssText = `
        position: absolute;
        bottom: calc(100% + 10px);
        left: 50%;
        transform: translateX(-50%) scale(0.95);
        transform-origin: bottom center;
        display: flex;
        flex-direction: column-reverse; /* Makes first option appear at bottom */
        gap: 8px;
        opacity: 0;
        visibility: hidden;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 10;
        pointer-events: none;
        filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
    `;
    
    // Create Post option
    const postOption = document.createElement('div');
    postOption.className = 'post-option';
    postOption.style.cssText = `
        background: white;
        border-radius: 16px;
        padding: 12px 16px;
        display: flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        transition: all 0.2s ease;
        white-space: nowrap;
        font-weight: 600;
        font-size: 15px;
        transform: translateY(8px);
        will-change: transform;
    `;
    postOption.innerHTML = `
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M23 3c-6.62-.1-10.38 2.421-13 5.76C7.38 5.42 3.62 2.9 0 3v2c3.62-.1 7.38 2.1 10 4.76C12.62 7.1 16.38 4.9 20 5v2c-3.62.1-7.38 2.1-10 4.76c-2.62-2.66-6.38-4.86-10-4.76v2c3.62-.1 7.38 2.1 10 4.76c-2.62 2.66-6.38 4.86-10 4.76v2c6.62-.1 10.38-2.421 13-5.76c2.62 3.34 6.38 5.66 10 5.76v-2c-3.62.1-7.38-2.1-10-4.76c2.62-2.66 6.38-4.86 10-4.76v-2c-3.62.1-7.38 2.1-10 4.76c2.62-2.66 6.38-4.86 10-4.76V3z"/>
        </svg>
        <span>Post</span>
    `;
    
    // Create Appearance option
    const appearanceOption = document.createElement('div');
    appearanceOption.className = 'appearance-option';
    appearanceOption.style.cssText = `
        background: white;
        border-radius: 16px;
        padding: 12px 16px;
        display: flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        transition: all 0.2s ease;
        white-space: nowrap;
        font-weight: 600;
        font-size: 15px;
        transform: translateY(8px);
        will-change: transform;
    `;
    appearanceOption.innerHTML = `
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 22c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10zm0-18c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9L7.1 5.69C8.45 4.63 10.15 4 12 4zM5.69 7.1L16.9 18.31C15.55 19.37 13.85 20 12 20c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9z"/>
        </svg>
        <span>Appearance</span>
    `;
    
    // Add elements to DOM
    optionsContainer.appendChild(appearanceOption);
    optionsContainer.appendChild(postOption);
    postBtn.parentNode.appendChild(optionsContainer);
    
    // Create post compose modal (right side animation)
    const postModal = document.createElement('div');
    postModal.className = 'post-compose-modal';
    postModal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.4);
        display: none;
        justify-content: flex-end;
        align-items: flex-start;
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.2s ease;
    `;
    
    const postModalContent = document.createElement('div');
    postModalContent.className = 'post-compose-content';
    postModalContent.style.cssText = `
        background: white;
        border-radius: 16px 16px 0 0;
        width: 600px;
        max-width: 100%;
        height: 90vh;
        max-height: calc(100% - 20px);
        overflow: hidden;
        position: relative;
        transform: translateY(20px) translateX(100%);
        transition: transform 0.3s cubic-bezier(0.17, 0.67, 0.21, 0.99);
        margin-top: 20px;
        box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
    `;
    
    // Create minimal close button (X)
    const postCloseBtn = document.createElement('button');
    postCloseBtn.className = 'post-compose-close';
    postCloseBtn.innerHTML = '×';
    postCloseBtn.style.cssText = `
        position: absolute;
        top: 8px;
        left: 8px;
        background: transparent;
        border: none;
        font-size: 18px;
        font-weight: 400;
        cursor: pointer;
        z-index: 1001;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #536471;
        transition: background-color 0.2s ease;
    `;
    
    // Create loader with theme-aware animation
    const postLoader = document.createElement('div');
    postLoader.className = 'post-compose-loader';
    postLoader.style.cssText = `
        display: flex;
        justify-content: center;
        align-items: center;
        height: 200px;
        padding: 20px;
    `;
    
    postLoader.innerHTML = `
        <svg width="32" height="32" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" opacity="0.1" fill="currentColor"/>
            <path d="M12 22c5.523 0 10-4.477 10-10h-3c0 3.866-3.134 7-7 7s-7-3.134-7-7 3.134-7 7-7V2C6.477 2 2 6.477 2 12s4.477 10 10 10z" fill="currentColor">
                <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="0.8s" repeatCount="indefinite"/>
            </path>
        </svg>
    `;
    
    // Create iframe container
    const postIframeContainer = document.createElement('div');
    postIframeContainer.className = 'post-compose-iframe';
    postIframeContainer.style.cssText = `
        width: 100%;
        height: calc(100% - 40px);
        display: none;
        position: relative;
    `;
    
    // Create the iframe
    const postIframe = document.createElement('iframe');
    postIframe.src = 'upload.html';
    postIframe.style.cssText = `
        width: 100%;
        height: 100%;
        border: none;
    `;
    
    // Assemble the modal
    postIframeContainer.appendChild(postIframe);
    postModalContent.appendChild(postCloseBtn);
    postModalContent.appendChild(postLoader);
    postModalContent.appendChild(postIframeContainer);
    postModal.appendChild(postModalContent);
    document.body.appendChild(postModal);
    
    // Create appearance modal (center animation)
    const appearanceModal = document.createElement('div');
    appearanceModal.className = 'appearance-modal';
    appearanceModal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.4);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.2s ease;
    `;
    
    const appearanceContent = document.createElement('div');
    appearanceContent.className = 'appearance-content';
    appearanceContent.style.cssText = `
        background: white;
        border-radius: 16px;
        width: 500px;
        max-width: calc(100% - 40px);
        height: auto;
        max-height: 80vh;
        overflow: hidden;
        position: relative;
        transform: translateY(20px);
        transition: transform 0.3s cubic-bezier(0.17, 0.67, 0.21, 0.99);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    `;
    
    // Minimal close button (X)
    const appearanceCloseBtn = document.createElement('button');
    appearanceCloseBtn.className = 'appearance-close';
    appearanceCloseBtn.innerHTML = '×';
    appearanceCloseBtn.style.cssText = `
        position: absolute;
        top: 8px;
        left: 8px;
        background: transparent;
        border: none;
        font-size: 18px;
        font-weight: 400;
        cursor: pointer;
        z-index: 1001;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #536471;
        transition: background-color 0.2s ease;
    `;
    
    const appearanceLoader = document.createElement('div');
    appearanceLoader.className = 'appearance-loader';
    appearanceLoader.style.cssText = `
        display: flex;
        justify-content: center;
        align-items: center;
        height: 150px;
        padding: 20px;
    `;
    
    appearanceLoader.innerHTML = `
        <svg width="32" height="32" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" opacity="0.1" fill="currentColor"/>
            <path d="M12 22c5.523 0 10-4.477 10-10h-3c0 3.866-3.134 7-7 7s-7-3.134-7-7 3.134-7 7-7V2C6.477 2 2 6.477 2 12s4.477 10 10 10z" fill="currentColor">
                <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="0.8s" repeatCount="indefinite"/>
            </path>
        </svg>
    `;
    
    const appearanceIframeContainer = document.createElement('div');
    appearanceIframeContainer.className = 'appearance-iframe';
    appearanceIframeContainer.style.cssText = `
        width: 100%;
        height: 500px;
        display: none;
        position: relative;
    `;
    
    const appearanceIframe = document.createElement('iframe');
    appearanceIframe.src = 'chats.html';
    appearanceIframe.style.cssText = `
        width: 100%;
        height: 100%;
        border: none;
    `;
    
    appearanceIframeContainer.appendChild(appearanceIframe);
    appearanceContent.appendChild(appearanceCloseBtn);
    appearanceContent.appendChild(appearanceLoader);
    appearanceContent.appendChild(appearanceIframeContainer);
    appearanceModal.appendChild(appearanceContent);
    document.body.appendChild(appearanceModal);
    
    // Function to get current theme and brand color
    function getCurrentStyles() {
        return {
            theme: localStorage.getItem('twitter-theme') || 'light',
            brandColor: localStorage.getItem('color-value') || '#5A9BD5'
        };
    }
    
    // Update styles based on theme and brand color
    function updateStyles() {
        const styles = getCurrentStyles();
        const isBrightColor = getBrightness(styles.brandColor) > 160;
        const textColor = isBrightColor ? '#000000' : '#ffffff';
        
        // Set background colors based on theme
        let bgColor, hoverBgColor, modalBgColor, textMainColor;
        
        if (styles.theme === 'dark') {
            bgColor = '#000000';
            hoverBgColor = '#181818';
            modalBgColor = '#15181c';
            textMainColor = '#e7e9ea';
        } else if (styles.theme === 'dim') {
            bgColor = '#15202b';
            hoverBgColor = '#1e2732';
            modalBgColor = '#1e2732';
            textMainColor = '#f7f9f9';
        } else {
            bgColor = '#ffffff';
            hoverBgColor = '#f7f9f9';
            modalBgColor = '#ffffff';
            textMainColor = '#0f1419';
        }
        
        // Update options styles
        postOption.style.backgroundColor = bgColor;
        postOption.style.color = textMainColor;
        postOption.style.boxShadow = `0 2px 8px ${hexToRGBA(styles.brandColor, 0.15)}`;
        
        appearanceOption.style.backgroundColor = bgColor;
        appearanceOption.style.color = textMainColor;
        appearanceOption.style.boxShadow = `0 2px 8px ${hexToRGBA(styles.brandColor, 0.15)}`;
        
        // Update modals
        postModalContent.style.backgroundColor = modalBgColor;
        postModalContent.style.color = textMainColor;
        
        appearanceContent.style.backgroundColor = modalBgColor;
        appearanceContent.style.color = textMainColor;
        
        // Update close buttons
        postCloseBtn.style.color = textMainColor;
        appearanceCloseBtn.style.color = textMainColor;
        
        // Update hover effects
        postOption.onmouseover = () => {
            postOption.style.backgroundColor = hoverBgColor;
            postOption.style.transform = 'translateY(0)';
        };
        
        postOption.onmouseout = () => {
            postOption.style.backgroundColor = bgColor;
            postOption.style.transform = 'translateY(8px)';
        };
        
        appearanceOption.onmouseover = () => {
            appearanceOption.style.backgroundColor = hoverBgColor;
            appearanceOption.style.transform = 'translateY(0)';
        };
        
        appearanceOption.onmouseout = () => {
            appearanceOption.style.backgroundColor = bgColor;
            appearanceOption.style.transform = 'translateY(8px)';
        };
        
        // Update close button hover effects
        postCloseBtn.onmouseover = () => {
            postCloseBtn.style.backgroundColor = styles.theme === 'light' ? 'rgba(15, 20, 25, 0.1)' : 'rgba(231, 233, 234, 0.1)';
        };
        
        postCloseBtn.onmouseout = () => {
            postCloseBtn.style.backgroundColor = 'transparent';
        };
        
        appearanceCloseBtn.onmouseover = () => {
            appearanceCloseBtn.style.backgroundColor = styles.theme === 'light' ? 'rgba(15, 20, 25, 0.1)' : 'rgba(231, 233, 234, 0.1)';
        };
        
        appearanceCloseBtn.onmouseout = () => {
            appearanceCloseBtn.style.backgroundColor = 'transparent';
        };
        
        // Update loader colors
        const loaders = document.querySelectorAll('.post-compose-loader, .appearance-loader');
        loaders.forEach(loader => {
            loader.querySelector('path').setAttribute('fill', styles.brandColor);
            loader.querySelector('circle').setAttribute('fill', hexToRGBA(styles.brandColor, 0.1));
        });
    }
    
    // Show/hide options with proper animation
    function toggleOptions() {
        updateStyles();
        
        if (optionsContainer.style.opacity === '1') {
            // Hide options
            optionsContainer.style.opacity = '0';
            optionsContainer.style.visibility = 'hidden';
            optionsContainer.style.pointerEvents = 'none';
            optionsContainer.style.transform = 'translateX(-50%) scale(0.95)';
            
            // Reset option positions
            postOption.style.transform = 'translateY(8px)';
            appearanceOption.style.transform = 'translateY(8px)';
        } else {
            // Show options
            optionsContainer.style.opacity = '1';
            optionsContainer.style.visibility = 'visible';
            optionsContainer.style.pointerEvents = 'auto';
            optionsContainer.style.transform = 'translateX(-50%) scale(1)';
            
            // Animate options in sequence
            setTimeout(() => {
                postOption.style.transform = 'translateY(0)';
                setTimeout(() => {
                    appearanceOption.style.transform = 'translateY(0)';
                }, 50);
            }, 50);
        }
    }
    
    // Open post modal (right side animation)
    function openPostModal() {
        updateStyles();
        document.body.style.overflow = 'hidden';
        postModal.style.display = 'flex';
        
        // Force reflow
        void postModal.offsetWidth;
        
        // Animate in
        postModal.style.opacity = '1';
        postModalContent.style.transform = 'translateY(0) translateX(0)';
        
        // Show content after loader
        setTimeout(() => {
            postLoader.style.display = 'none';
            postIframeContainer.style.display = 'block';
        }, 800);
        
        // Hide options
        toggleOptions();
    }
    
    // Close post modal
    function closePostModal() {
        postModal.style.opacity = '0';
        postModalContent.style.transform = 'translateY(20px) translateX(100%)';
        
        setTimeout(() => {
            postModal.style.display = 'none';
            postLoader.style.display = 'flex';
            postIframeContainer.style.display = 'none';
            document.body.style.overflow = '';
        }, 300);
    }
    
    // Open appearance modal (center animation)
    function openAppearanceModal() {
        updateStyles();
        document.body.style.overflow = 'hidden';
        appearanceModal.style.display = 'flex';
        
        // Force reflow
        void appearanceModal.offsetWidth;
        
        // Animate in
        appearanceModal.style.opacity = '1';
        appearanceContent.style.transform = 'translateY(0)';
        
        // Show content after loader
        setTimeout(() => {
            appearanceLoader.style.display = 'none';
            appearanceIframeContainer.style.display = 'block';
        }, 800);
        
        // Hide options
        toggleOptions();
    }
    
    // Close appearance modal
    function closeAppearanceModal() {
        appearanceModal.style.opacity = '0';
        appearanceContent.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
            appearanceModal.style.display = 'none';
            appearanceLoader.style.display = 'flex';
            appearanceIframeContainer.style.display = 'none';
            document.body.style.overflow = '';
        }, 300);
    }
    
    // Utility: Get color brightness
    function getBrightness(hex) {
        const rgb = hexToRGB(hex);
        return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;
    }
    
    // Utility: Convert hex to RGB
    function hexToRGB(hex) {
        hex = hex.replace('#', '');
        const r = parseInt(hex.substring(0, 2), 16);
        const g = parseInt(hex.substring(2, 4), 16);
        const b = parseInt(hex.substring(4, 6), 16);
        return { r, g, b };
    }
    
    // Utility: Convert hex to rgba
    function hexToRGBA(hex, alpha) {
        const rgb = hexToRGB(hex);
        return `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${alpha})`;
    }
    
    // Event listeners
    postBtn.addEventListener('click', toggleOptions);
    postOption.addEventListener('click', openPostModal);
    appearanceOption.addEventListener('click', openAppearanceModal);
    postCloseBtn.addEventListener('click', closePostModal);
    appearanceCloseBtn.addEventListener('click', closeAppearanceModal);
    
    // Close when clicking outside
    postModal.addEventListener('click', function(e) {
        if (e.target === postModal) closePostModal();
    });
    
    appearanceModal.addEventListener('click', function(e) {
        if (e.target === appearanceModal) closeAppearanceModal();
    });
    
    // Handle escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            if (postModal.style.display === 'flex') closePostModal();
            if (appearanceModal.style.display === 'flex') closeAppearanceModal();
            if (optionsContainer.style.opacity === '1') toggleOptions();
        }
    });
    
    // Handle iframe errors by retrying
    postIframe.addEventListener('error', function() {
        this.src = 'upload.html'; // Retry loading
    });
    
    appearanceIframe.addEventListener('error', function() {
        this.src = 'chats.html'; // Retry loading
    });
    
    // Listen for theme/color changes
    window.addEventListener('storage', function(event) {
        if (event.key === 'twitter-theme' || event.key === 'color-value' || event.key === 'color-palette') {
            updateStyles();
        }
    });
    
    // Custom events
    window.addEventListener('themeChanged', function() {
        updateStyles();
    });
    
    window.addEventListener('chatColorChanged', function() {
        updateStyles();
    });
    
    // Close options when clicking elsewhere
    document.addEventListener('click', function(e) {
        if (optionsContainer.style.opacity === '1' && 
            !postBtn.contains(e.target) && 
            !optionsContainer.contains(e.target)) {
            toggleOptions();
        }
    });
    
    // Apply initial styles
    updateStyles();
});
</script>

<script>
  // Font size synchronization script
  (function() {
    // Function to apply font size from localStorage
    function applyFontSize() {
      const size = localStorage.getItem('font-size') || '1';
      document.body.style.fontSize = size + 'rem';
      
      // Add scaling to different elements if needed
      const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
      const paragraphs = document.querySelectorAll('p');
      const buttons = document.querySelectorAll('button');
      const inputs = document.querySelectorAll('input');
      
      headings.forEach(heading => {
        const currentSize = window.getComputedStyle(heading).fontSize;
        const baseSize = parseFloat(currentSize) / 16; // convert to rem
        heading.style.fontSize = (baseSize * parseFloat(size)) + 'rem';
      });
      
      paragraphs.forEach(p => {
        p.style.fontSize = size + 'rem';
      });
      
      buttons.forEach(button => {
        button.style.fontSize = (parseFloat(size) * 0.9) + 'rem';
      });
      
      inputs.forEach(input => {
        input.style.fontSize = size + 'rem';
      });
    }
    
    // Apply immediately
    applyFontSize();
    
    // Listen for changes
    window.addEventListener('storage', function(event) {
      if (event.key === 'font-size') {
        applyFontSize();
      }
    });
    
    // Check every second for changes (backup method)
    setInterval(function() {
      const currentSize = document.body.style.fontSize;
      const savedSize = localStorage.getItem('font-size') || '1';
      
      if (currentSize !== savedSize + 'rem') {
        applyFontSize();
      }
    }, 1000);
  })();
</script>

</body>
</html>
