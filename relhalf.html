
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Media Interface</title>
     <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }
        /* Prevent scrolling */
        html, body {
            overflow: hidden;
            height: 100%;
            width: 100%;
        }

        body {
            background-color: #fff;
            color: #0f1419;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
            width: 100%;
        }

        /* Left sidebar styles */
        .sidebar {
            width: 325px;
            padding: 0 12px;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #eff3f4;
            height: 100%;
        }

        /* Logo styles */
        .logo-container {
            margin: 12px 0;
            padding: 10px 12px;
        }

        .logo {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: #1d9bf0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 28px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .logo:hover {
            background-color: #1a8cd8;
        }

        .menu {
            display: flex;
            flex-direction: column;
            margin-top: 10px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px;
            border-radius: 50px;
            margin-bottom: 12px;
            color: #0f1419;
            text-decoration: none;
            font-size: 18px;
            font-weight: 400;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .menu-item:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .menu-item.active {
            font-weight: 700;
        }

        .menu-item svg {
            margin-right: 20px;
            width: 24px;
            height: 24px;
        }

        .post-btn {
            background-color: #1d9bf0;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 0;
            font-size: 16px;
            font-weight: 700;
            margin: 15px 0;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .post-btn:hover {
            background-color: #1a8cd8;
        }

        /* Content sections */
        .content-section {
            position: relative;
            height: 100%;
        }

        .content {
            flex-grow: 1;
            min-width: 0;
            height: 100%;
            border-right: 1px solid #eff3f4;
        }

        .widgets {
            width: 350px;
            height: 100%;
        }

        .section-container {
            width: 100%;
            height: 100%;
            display: none;
        }

        .section-container.active {
            display: block;
        }

        .loader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            display: none;
        }

        .loader svg {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive styles */
        @media (max-width: 1024px) {
            .widgets {
                width: 290px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 88px;
                padding: 0 8px;
            }
            .sidebar .menu-item span {
                display: none;
            }
            .sidebar .post-btn {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                padding: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 15px auto;
            }
            .sidebar .post-btn::after {
                content: "+";
                font-size: 24px;
            }
            .sidebar .post-btn span {
                display: none;
            }
        }

        @media (max-width: 500px) {
            .widgets {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Left sidebar (menu) -->
        <div class="sidebar">
            <!-- Logo -->
            <div class="logo-container">
                <div class="logo" id="home-logo">
                    N
                </div>
            </div>
            
            <nav class="menu">
                <a href="#" class="menu-item active" data-section="home-section">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M21.591 7.146L12.52 1.157c-.316-.21-.77-.21-1.086 0l-9.071 5.99c-.199.132-.332.352-.347.597-.015.246.088.48.269.633l.086.071c.172.142.387.219.611.219.215 0 .424-.069.599-.195l.098-.084L12 3.1l8.317 5.188c.38.286.918.215 1.208-.157.29-.372.23-.906-.139-1.199l.205.214zm-9.591 4.28V20.5c0 .276.224.5.5.5h7.5c.276 0 .5-.224.5-.5v-9.164c0-.276-.224-.5-.5-.5h-7.5c-.276 0-.5.224-.5.5zM4.5 20.5c0 .276.224.5.5.5h7.5V11.5c0-.276-.224-.5-.5-.5H5c-.276 0-.5.224-.5.5v9z"></path>
                    </svg>
                    <span>Home</span>
                </a>
                <a href="#" class="menu-item" data-section="explore-section">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M21 7.337h-3.93l.372-4.272c.036-.412-.27-.775-.682-.812-.417-.03-.776.27-.812.683l-.383 4.4h-6.32l.37-4.27c.037-.413-.27-.776-.68-.813-.42-.03-.777.27-.813.683l-.382 4.4H3.782c-.414 0-.75.337-.75.75s.336.75.75.75H7.61l-.55 6.327H3c-.414 0-.75.336-.75.75s.336.75.75.75h3.93l-.372 4.272c-.036.412.27.775.682.812l.066.003c.385 0 .712-.295.746-.686l.383-4.4h6.32l-.37 4.27c-.036.413.27.776.682.813l.066.003c.385 0 .712-.295.746-.686l.382-4.4h3.957c.413 0 .75-.337.75-.75s-.337-.75-.75-.75H16.39l.55-6.327H21c.414 0 .75-.336.75-.75s-.336-.75-.75-.75zm-6.115 7.826h-6.32l.55-6.326h6.32l-.55 6.326z"></path>
                    </svg>
                    <span>Explore</span>
                </a>
                <a href="#" class="menu-item" data-section="notifications-section">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19.993 9.042C19.48 5.017 16.054 2 11.996 2s-7.49 3.021-7.999 7.051L2.866 18H7.1c.463 2.282 2.481 4 4.9 4s4.437-1.718 4.9-4h4.236l-1.143-8.958zM12 20c-1.306 0-2.417-.835-2.829-2h5.658c-.412 1.165-1.523 2-2.829 2zm-6.866-4l.847-6.698C6.364 6.272 8.941 4 11.996 4s5.627 2.268 6.013 5.295L18.864 16H5.134z"></path>
                    </svg>
                    <span>Notifications</span>
                </a>
                <a href="#" class="menu-item" data-section="messages-section">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M1.998 4.499c0-.828.671-1.499 1.5-1.499h17c.828 0 1.5.671 1.5 1.499v2.858l-10 4.545-10-4.547V4.499zm0 5.053V19.5c0 .828.671 1.5 1.5 1.5h17c.828 0 1.5-.672 1.5-1.5V9.554l-10 4.545-10-4.547z"></path>
                    </svg>
                    <span>Messages</span>
                </a>
                <a href="#" class="menu-item" data-section="bookmarks-section">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M4 4.5C4 3.12 5.119 2 6.5 2h11C18.881 2 20 3.12 20 4.5v18.44l-8-5.71-8 5.71V4.5zM6.5 4c-.276 0-.5.22-.5.5v14.56l6-4.29 6 4.29V4.5c0-.28-.224-.5-.5-.5h-11z"></path>
                    </svg>
                    <span>Bookmarks</span>
                </a>
                <a href="#" class="menu-item" data-section="profile-section">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M5.651 19h12.698c-.337-1.8-1.023-3.21-1.945-4.19C15.318 13.65 13.838 13 12 13s-3.317.65-4.404 1.81c-.922.98-1.608 2.39-1.945 4.19zm.486-5.56C7.627 11.85 9.648 11 12 11s4.373.85 5.863 2.44c1.477 1.58 2.366 3.8 2.632 6.46l.11 1.1H3.395l.11-1.1c.266-2.66 1.155-4.88 2.632-6.46zM12 4c-1.105 0-2 .9-2 2s.895 2 2 2 2-.9 2-2-.895-2-2-2zM8 6c0-2.21 1.791-4 4-4s4 1.79 4 4-1.791 4-4 4-4-1.79-4-4z"></path>
                    </svg>
                    <span>Profile</span>
                </a>
            </nav>
            <button class="post-btn">
                <span>Post</span>
            </button>
        </div>

        <!-- Middle section (dynamic content) -->
        <div class="content content-section">
            <!-- All sections are preloaded but hidden -->
            <div id="home-section" class="section-container active">
                <iframe src="globalchat.html" frameborder="0" width="100%" height="100%"></iframe>
            </div>
            <div id="explore-section" class="section-container">
                <iframe src="feeds.html" frameborder="0" width="100%" height="100%"></iframe>
            </div>
            <div id="notifications-section" class="section-container">
                <iframe src="notifications.html" frameborder="0" width="100%" height="100%"></iframe>
            </div>
            <div id="messages-section" class="section-container">
                <iframe src="messages.html" frameborder="0" width="100%" height="100%"></iframe>
            </div>
            <div id="bookmarks-section" class="section-container">
                <iframe src="bookmarks.html" frameborder="0" width="100%" height="100%"></iframe>
            </div>
            <div id="profile-section" class="section-container">
                <iframe src="profileview.html" frameborder="0" width="100%" height="100%"></iframe>
            </div>
            
            <!-- Loader -->
            <div class="loader" id="content-loader">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="#1d9bf0">
                    <circle cx="12" cy="12" r="10" opacity="0.1" fill="#1d9bf0"/>
                    <path d="M12 22c5.523 0 10-4.477 10-10h-3c0 3.866-3.134 7-7 7s-7-3.134-7-7 3.134-7 7-7V2C6.477 2 2 6.477 2 12s4.477 10 10 10z"></path>
                </svg>
            </div>
        </div>

        <!-- Right widgets section -->
        <div class="widgets content-section">
            <iframe id="widgets-frame" src="count.html" frameborder="0" width="100%" height="100%"></iframe>
            <div class="loader" id="widgets-loader">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="#1d9bf0">
                    <circle cx="12" cy="12" r="10" opacity="0.1" fill="#1d9bf0"/>
                    <path d="M12 22c5.523 0 10-4.477 10-10h-3c0 3.866-3.134 7-7 7s-7-3.134-7-7 3.134-7 7-7V2C6.477 2 2 6.477 2 12s4.477 10 10 10z"></path>
                </svg>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const menuItems = document.querySelectorAll('.menu-item');
            const sections = document.querySelectorAll('.section-container');
            const contentLoader = document.getElementById('content-loader');
            const logo = document.getElementById('home-logo');
            
            // Add logo click handler to return to home
            logo.addEventListener('click', function() {
                switchToSection('home-section');
            });
            
            // Track loaded sections to avoid reloading
            const loadedSections = {
                'home-section': false,
                'explore-section': false,
                'notifications-section': false,
                'messages-section': false,
                'bookmarks-section': false,
                'profile-section': false
            };
            
            // Set home section as loaded
            loadedSections['home-section'] = true;
            
            // Load a section only the first time it's accessed
            function loadSection(sectionId) {
                if (!loadedSections[sectionId]) {
                    try {
                        // Mark section as loaded - this happens before the actual load
                        // to prevent multiple load attempts on errors
                        loadedSections[sectionId] = true;
                        
                        // Show loader while section initializes
                        contentLoader.style.display = 'block';
                        
                        // On first load, initialize the section
                        const section = document.getElementById(sectionId);
                        const iframe = section.querySelector('iframe');
                        
                        iframe.onload = function() {
                            // Hide loader when iframe is loaded
                            contentLoader.style.display = 'none';
                        };
                        
                        iframe.onerror = function() {
                            // Handle load error
                            console.error(`Failed to load content for ${sectionId}`);
                            contentLoader.style.display = 'none';
                            alert("Error loading content. Please try again later.");
                            
                            // Fall back to home section
                            switchToSection('home-section');
                        };
                        
                        // Add additional error handling with timeout
                        setTimeout(function() {
                            if (contentLoader.style.display === 'block') {
                                // Still loading after timeout - probably an error
                                contentLoader.style.display = 'none';
                            }
                        }, 5000);
                    } catch (error) {
                        console.error("Error initializing section:", error);
                        contentLoader.style.display = 'none';
                    }
                } else {
                    // Section already loaded, just show it
                    contentLoader.style.display = 'none';
                }
            }
            
            // Switch to a section
            function switchToSection(sectionId) {
                // Hide all sections
                sections.forEach(section => {
                    section.classList.remove('active');
                });
                
                // Show selected section
                const selectedSection = document.getElementById(sectionId);
                selectedSection.classList.add('active');
                
                // Load content if first visit
                loadSection(sectionId);
                
                // Update menu
                menuItems.forEach(item => {
                    if (item.getAttribute('data-section') === sectionId) {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                });
            }
            
            // Add click handlers to menu items
            menuItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const sectionId = this.getAttribute('data-section');
                    switchToSection(sectionId);
                });
            });
        });
    </script>
  <script>
  (function() {
    // RelHalf Theme Integration - Works alongside GlobalChatThemeManager
    const RelHalfThemeIntegrator = {
      // Style element ID
      styleElementId: 'relhalf-theme-integrator-styles',
      
      // Initialize integration
      initialize: function() {
        this.createStyleElement();
        this.applyCurrentTheme();
        this.setupEventListeners();
        console.log('RelHalf Theme Integrator initialized');
      },
      
      // Create dedicated style element
      createStyleElement: function() {
        const existingStyle = document.getElementById(this.styleElementId);
        if (existingStyle) {
          existingStyle.remove();
        }
        
        const styleElement = document.createElement('style');
        styleElement.id = this.styleElementId;
        styleElement.setAttribute('data-origin', 'relhalf-theme-integrator');
        document.head.appendChild(styleElement);
      },
      
      // Apply current theme from localStorage
      applyCurrentTheme: function() {
        const themeName = localStorage.getItem('twitter-theme') || 'light';
        this.applyTheme(themeName);
      },
      
      // Apply specified theme
      applyTheme: function(themeName) {
        // Default to light theme if invalid theme name
        const validThemes = ['light', 'dim', 'dark'];
        const theme = validThemes.includes(themeName) ? themeName : 'light';
        
        // Get style element
        const styleElement = document.getElementById(this.styleElementId);
        if (!styleElement) {
          this.createStyleElement();
          return this.applyTheme(theme); // Retry after creating style element
        }
        
        // Theme-specific CSS
        const themeCSS = {
          light: `
            body { background-color: #ffffff; color: #0f1419; }
            .sidebar { border-right-color: #eff3f4; }
            .content { border-right-color: #eff3f4; }
            .menu-item { color: #0f1419; }
            .menu-item:hover { background-color: rgba(0, 0, 0, 0.1); }
            .post-btn { background-color: #1d9bf0; }
            .post-btn:hover { background-color: #1a8cd8; }
          `,
          dim: `
            body { background-color: #15202b; color: #f7f9f9; }
            .sidebar { border-right-color: #38444d; }
            .content { border-right-color: #38444d; }
            .menu-item { color: #f7f9f9; }
            .menu-item:hover { background-color: rgba(255, 255, 255, 0.1); }
            .post-btn { background-color: #1d9bf0; }
            .post-btn:hover { background-color: #1a8cd8; }
          `,
          dark: `
            body { background-color: #000000; color: #ffffff; }
            .sidebar { border-right-color: #2f3336; }
            .content { border-right-color: #2f3336; }
            .menu-item { color: #ffffff; }
            .menu-item:hover { background-color: rgba(255, 255, 255, 0.1); }
            .post-btn { background-color: #1d9bf0; }
            .post-btn:hover { background-color: #1a8cd8; }
          `
        };
        
        // Apply custom color if available
        const savedColorValue = localStorage.getItem('color-value');
        const savedColorIndex = localStorage.getItem('color-palette');
        
        let customColorCSS = '';
        if (savedColorValue && savedColorIndex !== '0') {
          const colorObj = this.hexToRGB(savedColorValue);
          const rgbString = `${colorObj.r}, ${colorObj.g}, ${colorObj.b}`;
          
          customColorCSS = `
            .post-btn { background-color: ${savedColorValue}; }
            .post-btn:hover { background-color: ${this.darkenColor(savedColorValue, 0.15)}; }
            .menu-item.active svg { color: ${savedColorValue}; fill: ${savedColorValue}; }
            .loader svg path, .loader svg circle { fill: ${savedColorValue}; }
          `;
        }
        
        // Set the CSS content
        styleElement.textContent = themeCSS[theme] + customColorCSS;
        console.log('RelHalf Theme Integrator: Applied theme', theme);
      },
      
      // Set up event listeners
      setupEventListeners: function() {
        // Listen for localStorage changes (theme)
        window.addEventListener('storage', (e) => {
          if (e.key === 'twitter-theme') {
            this.applyTheme(e.newValue || 'light');
          }
          // Handle color changes
          if (e.key === 'color-value' || e.key === 'color-palette') {
            this.applyCurrentTheme(); // Reapply theme with new color
          }
        });
        
        // Listen for custom events from GlobalChatThemeManager
        window.addEventListener('themeChanged', (e) => {
          if (e.detail && e.detail.theme) {
            this.applyTheme(e.detail.theme);
          }
        });
        
        // Listen for custom color change events
        window.addEventListener('chatColorChanged', (e) => {
          this.applyCurrentTheme();
        });
        
        // Check for theme changes periodically
        this.setupPeriodicCheck();
      },
      
      // Set up periodic check for theme consistency
      setupPeriodicCheck: function() {
        let lastKnownTheme = localStorage.getItem('twitter-theme') || 'light';
        let lastKnownColor = localStorage.getItem('color-value') || '';
        
        setInterval(() => {
          const currentTheme = localStorage.getItem('twitter-theme');
          const currentColor = localStorage.getItem('color-value');
          
          if (currentTheme !== lastKnownTheme || currentColor !== lastKnownColor) {
            lastKnownTheme = currentTheme || 'light';
            lastKnownColor = currentColor || '';
            this.applyCurrentTheme();
          }
        }, 3000); // Check every 3 seconds
      },
      
      // Utility: Convert hex to RGB
      hexToRGB: function(hex) {
        hex = hex.replace('#', '');
        const r = parseInt(hex.substring(0, 2), 16);
        const g = parseInt(hex.substring(2, 4), 16);
        const b = parseInt(hex.substring(4, 6), 16);
        return { r, g, b };
      },
      
      // Utility: Darken color
      darkenColor: function(hex, percent) {
        hex = hex.replace('#', '');
        let r = parseInt(hex.substring(0, 2), 16);
        let g = parseInt(hex.substring(2, 4), 16);
        let b = parseInt(hex.substring(4, 6), 16);
        
        r = Math.floor(r * (1 - percent));
        g = Math.floor(g * (1 - percent));
        b = Math.floor(b * (1 - percent));
        
        r = Math.max(0, r);
        g = Math.max(0, g);
        b = Math.max(0, b);
        
        return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
      }
    };
    
    // Initialize the theme integrator with a slight delay to ensure DOM is ready
    setTimeout(function() {
      RelHalfThemeIntegrator.initialize();
    }, 200);
  })();
</script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const postBtn = document.querySelector('.post-btn');
    
    // Create modal elements
    const modal = document.createElement('div');
    modal.className = 'tweet-compose-modal';
    modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.4);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        opacity: 0;
        transition: opacity 0.2s ease;
    `;
    
    const modalContent = document.createElement('div');
    modalContent.className = 'tweet-compose-content';
    modalContent.style.cssText = `
        background: white;
        border-radius: 16px;
        width: 600px;
        max-width: 90%;
        height: auto;
        max-height: 90vh;
        overflow: hidden;
        position: relative;
        transform: translateY(20px);
        transition: transform 0.2s ease;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
    `;
    
    // Create close button (X)
    const closeBtn = document.createElement('button');
    closeBtn.className = 'tweet-compose-close';
    closeBtn.innerHTML = '×';
    closeBtn.style.cssText = `
        position: absolute;
        top: 8px;
        left: 8px;
        background: transparent;
        border: none;
        font-size: 20px;
        font-weight: bold;
        cursor: pointer;
        z-index: 1001;
        width: 34px;
        height: 34px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #536471;
    `;
    
    // Create loader with Twitter-style animation
    const loader = document.createElement('div');
    loader.className = 'tweet-compose-loader';
    loader.style.cssText = `
        display: flex;
        justify-content: center;
        align-items: center;
        height: 150px;
        padding: 20px;
    `;
    
    loader.innerHTML = `
        <svg width="30" height="30" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" fill="#e6e7e8"/>
            <path d="M12 22c5.523 0 10-4.477 10-10h-3c0 3.866-3.134 7-7 7s-7-3.134-7-7 3.134-7 7-7V2C6.477 2 2 6.477 2 12s4.477 10 10 10z" fill="#1d9bf0">
                <animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="0.8s" repeatCount="indefinite"/>
            </path>
        </svg>
    `;
    
    // Create iframe container
    const iframeContainer = document.createElement('div');
    iframeContainer.className = 'tweet-compose-iframe';
    iframeContainer.style.cssText = `
        width: 100%;
        height: 400px;
        display: none;
        position: relative;
    `;
    
    // Create the iframe
    const iframe = document.createElement('iframe');
    iframe.src = 'chats.html';
    iframe.style.cssText = `
        width: 100%;
        height: 100%;
        border: none;
    `;
    
    // Assemble the modal
    iframeContainer.appendChild(iframe);
    modalContent.appendChild(closeBtn);
    modalContent.appendChild(loader);
    modalContent.appendChild(iframeContainer);
    modal.appendChild(modalContent);
    document.body.appendChild(modal);
    
    // Function to open modal
    function openModal() {
      document.body.style.overflow = 'hidden'; // Prevent background scrolling
      modal.style.display = 'flex';
      
      // Force reflow
      void modal.offsetWidth;
      
      // Animate in
      modal.style.opacity = '1';
      modalContent.style.transform = 'translateY(0)';
      
      // Show content after loader
      setTimeout(() => {
        loader.style.display = 'none';
        iframeContainer.style.display = 'block';
        
        // Adjust iframe height to fit content (if possible)
        try {
          iframe.onload = function() {
            try {
              const iframeHeight = iframe.contentWindow.document.body.scrollHeight;
              const maxHeight = window.innerHeight * 0.7; // Max 70% of viewport
              iframeContainer.style.height = Math.min(iframeHeight, maxHeight) + 'px';
            } catch (e) {
              // If cross-origin issues prevent access, use default height
              console.log('Using default iframe height');
            }
          };
        } catch (e) {
          console.log('Error setting iframe dimensions');
        }
      }, 800);
    }
    
    // Function to close modal
    function closeModal() {
      modal.style.opacity = '0';
      modalContent.style.transform = 'translateY(20px)';
      
      setTimeout(() => {
        modal.style.display = 'none';
        loader.style.display = 'flex';
        iframeContainer.style.display = 'none';
        document.body.style.overflow = ''; // Restore scrolling
      }, 200);
    }
    
    // Event listeners
    postBtn.addEventListener('click', openModal);
    closeBtn.addEventListener('click', closeModal);
    
    // Close when clicking outside
    modal.addEventListener('click', function(e) {
      if (e.target === modal) closeModal();
    });
    
    // Handle escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && modal.style.display === 'flex') closeModal();
    });
    
    // Handle iframe errors by retrying
    iframe.addEventListener('error', function() {
      this.src = 'chats.html'; // Retry loading
    });
  });
</script>
</body>
</html>
